---
output:
  knitrBootstrap::bootstrap_document:
    theme.chooser: TRUE
    highlight.chooser: TRUE
---

<!--
%\VignetteEngine{knitr::rmarkdown}
%\VignetteIndexEntry{Example 2}
%\VignetteDepends{xtable}
-->

```{r, echo=FALSE, eval = TRUE, message=FALSE, results='hide'}
library(SBadapter)
setSBserverIOfolder("/tmp/")
```
  
# Example 2 - simple regression#   
Goal: Predict Titanic Passenger
<br>
This example demonstrates how to perform a simple regression using the SparkBeyond platform.
We will use the same titanic data but now we will aim to predict the column `age`.
<br>
```{r titanic_age_regression_simple, eval=TRUE, message=FALSE, results='hide'}
data = getData("titanic_train")
titanicAgeModel = learn(projectName = "titanic_age",
                        trainData = data,
                        target = "age",
                        algorithmsWhiteList = list("RRandomForestRegressor"),  
                        maxFeaturesCount = 25,
                        scoreOnTestSet = TRUE,
                        autoSave = FALSE
                    )

```
<br>
From this examples, we can see that having the tokens 'master' and 'miss' in the passenger name are strong indicators of the gender. 
Here are the top features:
<br>
```{r, eval=TRUE, results='asis'}
library(xtable)
print(xtable(titanicAgeModel$features()[1:7,c("idx", "feature")]), type='html', comment=F)
```
